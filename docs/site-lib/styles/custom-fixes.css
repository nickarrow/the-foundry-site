/* Hide the filename/page-title that appears at the top of each page */
.header .page-title {
  display: none;
}

/* Hide the horizontal line/data-bar at the top of each page */
.header .data-bar {
  display: none;
}

/* Hide the first TOC entry (duplicate from page title) */
#outline > .tree-item:first-child {
  display: none;
}

/* Fix code blocks being centered */
pre, code, .el-pre, .markdown-preview-view pre {
  text-align: left !important;
}

/* Fix for text not wrapping properly */
.markdown-preview-sizer,
.markdown-preview-section,
.el-p,
.el-blockquote,
.el-h1,
.el-h2,
.el-h3,
.el-h4,
.el-h5,
.el-h6 {
  word-wrap: break-word;
  overflow-wrap: break-word;
  word-break: normal;
}

/* Ensure paragraphs wrap properly */
.markdown-preview-view p,
.markdown-preview-view blockquote,
.markdown-preview-view li {
  word-wrap: break-word;
  overflow-wrap: break-word;
  white-space: normal;
}

/* Fix the container width constraints */
.markdown-preview-sizer {
  max-width: var(--line-width, 40em) !important;
  width: 100% !important;
  box-sizing: border-box;
}

/* Ensure inline mechanics elements don't break layout */
.iv-inline-mechanics {
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Fix potential overflow from long links or spans */
.internal-link,
.iv-inline-link,
.iv-inline-track-name,
.iv-inline-move-name {
  word-wrap: break-word;
  overflow-wrap: break-word;
}

/* Left-align content instead of center */
#center-content > .obsidian-document {
  align-items: flex-start !important;
}

/* Fix sidebar toggle icon position when collapsed */
/* The sidebar-topbar is position:fixed but the exported CSS is missing top:0,
   causing it to float at its natural document position. The right sidebar 
   happens to work by accident due to HTML order, but left sidebar breaks.
   We fix both for consistency and robustness. */

#left-sidebar .sidebar-topbar,
#right-sidebar .sidebar-topbar {
  top: 0 !important;
}

/* DEBUG: Bright backgrounds to see where elements are rendering */
#left-sidebar.is-collapsed .sidebar-topbar {
  background-color: red !important;
}

#left-sidebar.is-collapsed .clickable-icon.sidebar-collapse-icon {
  background-color: lime !important;
}

#left-sidebar.is-collapsed .clickable-icon.sidebar-collapse-icon svg {
  stroke: yellow !important;
}

.markdown-preview-view p,
.markdown-preview-view blockquote,
.markdown-preview-view li,
.markdown-preview-view h1,
.markdown-preview-view h2,
.markdown-preview-view h3,
.markdown-preview-view h4,
.markdown-preview-view h5,
.markdown-preview-view h6 {
  text-align: left;
}

/* Disable Iron Vault datasworn links - they don't work outside Obsidian */
a[data-datasworn-id] {
  pointer-events: none;
  text-decoration: none !important;
  color: inherit !important;
  background-image: none !important;
  background: none !important;
  padding-right: 0 !important;
}

/* Disable Iron Vault move links - they point to plugin sidebar, won't work outside Obsidian */
.iv-inline-move-name.iv-inline-link,
.iv-inline-oracle-name.iv-inline-link {
  pointer-events: none;
  cursor: default;
}

/* ============================================
   Iron Vault Mechanic Blocks - Flattened CSS
   
   The iron-vault-styles.css uses CSS nesting (& syntax)
   which browsers don't fully support. These are the
   flattened equivalents for .iron-vault-mechanics blocks.
   ============================================ */

/* Base dl styling */
.iron-vault-mechanics dl {
  --item-gap: 0.3em;
  display: flex;
  flex-flow: row wrap;
  gap: var(--item-gap);
  align-items: center;
}

.iron-vault-mechanics dl:before {
  margin-right: 0.5em;
}

.iron-vault-mechanics dl dt {
  display: none;
}

.iron-vault-mechanics dl dd {
  margin: 0;
  padding: 0;
  font-weight: var(--font-semibold);
  white-space: normal;
  font-size: inherit;
  font-family: inherit;
  max-height: none;
  overflow-y: visible;
}

.iron-vault-mechanics dl dd * {
  display: inline;
}

.iron-vault-mechanics dl dd .markdown-wrapper,
.iron-vault-mechanics dl dd .markdown-wrapper p {
  display: inline;
  margin: 0;
  padding: 0;
}

.iron-vault-mechanics dl dd:before,
.iron-vault-mechanics dl dd:after {
  color: var(--text-muted);
}

/* Challenge dice */
.iron-vault-mechanics dl dd.challenge-die.vs1 {
  color: var(--vs1-color);
}

.iron-vault-mechanics dl dd.challenge-die.vs2 {
  color: var(--vs2-color);
}

.iron-vault-mechanics dl dd.score:before {
  content: " = ";
}

/* Outcome colors */
.iron-vault-mechanics dl.strong-hit dd.score,
.iron-vault-mechanics dl.strong-hit dd.progress-score {
  color: var(--text-success);
}

.iron-vault-mechanics dl.weak-hit dd.score,
.iron-vault-mechanics dl.weak-hit dd.progress-score {
  color: var(--text-warning);
}

.iron-vault-mechanics dl.miss dd.score,
.iron-vault-mechanics dl.miss dd.progress-score {
  color: var(--text-error);
}

/* Roll styling */
.iron-vault-mechanics dl.roll:before {
  content: "\1f3b2";
}

.iron-vault-mechanics dl.roll dd.stat:before {
  content: " + ";
}

.iron-vault-mechanics dl.roll dd.stat-name {
  color: var(--text-muted);
}

.iron-vault-mechanics dl.roll dd.stat-name:before {
  content: " (";
}

.iron-vault-mechanics dl.roll dd.stat-name:after {
  content: ")";
}

.iron-vault-mechanics dl.roll dd.adds:before {
  content: " + ";
}

.iron-vault-mechanics dl.roll dd.outcome {
  display: none;
}

.iron-vault-mechanics dl.roll dd.challenge-die:first-of-type:before {
  content: " vs ";
}

.iron-vault-mechanics dl.roll dd.challenge-die + dd.challenge-die:before {
  content: " | ";
}

/* Oracle styling */
.iron-vault-mechanics dl.oracle:before {
  content: "\1f52e";
}

.iron-vault-mechanics dl.oracle dd.name:after {
  content: " ";
}

.iron-vault-mechanics dl.oracle dd.roll:before {
  content: "(=";
}

.iron-vault-mechanics dl.oracle dd.roll:after {
  content: ") ";
}

.iron-vault-mechanics dl.oracle dd.result:before,
.iron-vault-mechanics dl.oracle dd.result:after {
  content: '"';
}

.iron-vault-mechanics dl.oracle dd.replaced {
  display: none;
}

.iron-vault-mechanics dl.oracle ~ blockquote {
  margin-left: 0.5em;
  padding-left: 1.2em;
  border-left-style: dashed;
}

/* Oracle group */
.iron-vault-mechanics .oracle-group:before {
  content: "\1f52e\1f501";
  margin-right: 0.5em;
}

.iron-vault-mechanics .oracle-group .markdown-wrapper > *:first-child {
  display: inline;
}

.iron-vault-mechanics .oracle-group > blockquote {
  margin-left: 0.5em;
  padding-left: 1.2em;
  border-left-style: dashed;
  border-left-color: var(--blockquote-border-color);
}

/* Track status */
.iron-vault-mechanics dl.track-status:before {
  content: "\274e";
}

.iron-vault-mechanics dl.track-status dd.track-status {
  display: none;
}

/* Progress */
.iron-vault-mechanics dl.progress:before,
.iron-vault-mechanics .progress:before {
  content: "\23e9";
}

.iron-vault-mechanics dl.progress dd.track-name:after,
.iron-vault-mechanics .progress dd.track-name:after {
  content: ": ";
}

.iron-vault-mechanics dl.progress dd.steps.positive,
.iron-vault-mechanics .progress dd.steps.positive {
  color: var(--text-success);
}

.iron-vault-mechanics dl.progress dd.steps.positive:before,
.iron-vault-mechanics .progress dd.steps.positive:before {
  content: "+";
  color: var(--text-success);
}

.iron-vault-mechanics dl.progress dd.steps.negative,
.iron-vault-mechanics .progress dd.steps.negative {
  color: var(--text-error);
}

.iron-vault-mechanics dl.progress dd.steps.negative:before,
.iron-vault-mechanics .progress dd.steps.negative:before {
  content: "-";
  color: var(--text-error);
}

.iron-vault-mechanics dl.progress dd.rank,
.iron-vault-mechanics .progress dd.rank {
  text-transform: capitalize;
  color: var(--text-muted);
}

.iron-vault-mechanics dl.progress dd.rank:before,
.iron-vault-mechanics .progress dd.rank:before {
  content: " (";
}

.iron-vault-mechanics dl.progress dd.rank:after,
.iron-vault-mechanics .progress dd.rank:after {
  content: ") = ";
}

/* Track */
.iron-vault-mechanics .track:before {
  content: "\274e";
}

.iron-vault-mechanics .track dd.track-name:after {
  content: ": ";
}

/* Meter */
.iron-vault-mechanics dl.meter:before {
  content: "\1f4ca";
}

.iron-vault-mechanics dl.meter dd.delta.positive {
  color: var(--text-success);
}

.iron-vault-mechanics dl.meter dd.delta.positive:before {
  content: " + ";
}

.iron-vault-mechanics dl.meter dd.delta.negative {
  color: var(--text-error);
}

.iron-vault-mechanics dl.meter dd.delta.negative:before {
  content: " - ";
}

.iron-vault-mechanics dl.meter dd.from:before {
  content: " (";
}

.iron-vault-mechanics dl.meter dd.from:after {
  content: " → ";
}

.iron-vault-mechanics dl.meter dd.to:after {
  content: ")";
}

/* Clock */
.iron-vault-mechanics dl.clock:before {
  content: "\1f552";
}

.iron-vault-mechanics dl.clock dd.clock-name:after {
  content: ": ";
}

.iron-vault-mechanics dl.clock dd.from,
.iron-vault-mechanics dl.clock dd.to,
.iron-vault-mechanics dl.clock dd.out-of {
  color: var(--text-accent);
}

.iron-vault-mechanics dl.clock dd.from:after,
.iron-vault-mechanics dl.clock dd.to:after {
  content: "/";
}

/* Clock status */
.iron-vault-mechanics dl.clock-status:before {
  content: "\1f552";
}

.iron-vault-mechanics dl.clock-status dd.clock-status {
  display: none;
}

/* XP */
.iron-vault-mechanics dl.xp:before {
  content: "\1f4a1";
}

.iron-vault-mechanics dl.xp dd.delta.positive {
  color: var(--text-success);
}

.iron-vault-mechanics dl.xp dd.delta.positive:before {
  content: "XP +";
}

.iron-vault-mechanics dl.xp dd.delta.negative {
  color: var(--text-error);
}

.iron-vault-mechanics dl.xp dd.delta.negative:before {
  content: "XP -";
}

/* Burn */
.iron-vault-mechanics dl.burn:before {
  content: "\1f525";
}

.iron-vault-mechanics dl.burn dd.outcome {
  display: none;
}

/* Reroll */
.iron-vault-mechanics dl.reroll:before {
  content: "\1f501";
}

.iron-vault-mechanics dl.reroll dd.outcome {
  display: none;
}

/* Impact */
.iron-vault-mechanics dl.impact:before {
  content: "\1f4a5";
}

.iron-vault-mechanics dl.impact dd.impact-marked {
  display: none;
}

.iron-vault-mechanics dl.impact dd.impact-name:before {
  content: "Impact ";
}

/* Initiative */
.iron-vault-mechanics dl.initiative:before {
  content: "\2694\fe0f";
}

.iron-vault-mechanics dl.initiative dd.has-initiative {
  color: var(--text-success);
}

.iron-vault-mechanics dl.initiative dd.no-initiative {
  color: var(--text-error);
}

/* Asset */
.iron-vault-mechanics dl.asset:before {
  content: "\1f48e";
}

.iron-vault-mechanics dl.asset dd.asset-name:before {
  content: "Asset ";
}

.iron-vault-mechanics dl.asset dd.asset-name:after {
  content: " ";
}

/* Add */
.iron-vault-mechanics dl.add:before {
  content: "\2795";
}

.iron-vault-mechanics dl.add dd.amount.positive {
  color: var(--text-success);
}

.iron-vault-mechanics dl.add dd.amount.positive:before {
  content: "Add +";
}

.iron-vault-mechanics dl.add dd.amount.negative {
  color: var(--text-error);
}

.iron-vault-mechanics dl.add dd.amount.negative:before {
  content: "Subtract -";
}

/* Dice expression */
.iron-vault-mechanics dl.dice-expr:before {
  content: "\1f3b2";
}

.iron-vault-mechanics dl.dice-expr dd.expr:after {
  content: " → ";
}
